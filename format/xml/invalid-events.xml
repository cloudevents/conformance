<?xml version="1.0" encoding="utf-8" ?>
<testFile xmlns:ce="http://cloudevents.io/xmlformat/V1"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          testType="InvalidSingleEvent">
  <test id="invalidWrongElementName">
    <ce:Event specversion="1.0" >
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:Event>
  </test>

  <test id="invalidWrongElementNamespace">
    <ce2:event specversion="1.0" xmlns:ce2="http://cloudevents.io/xmlformat/V2">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce2:event>
  </test>

  <test id="invalidMissingElementNamespace">
    <event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </event>
  </test>

  <test id="invalidSpecversionInNamespace">
    <ce:event ce:specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <test id="invalidNoSpecVersion">
    <ce:event>
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <!-- We use just the id element to test additional problems that could apply to any CloudEvent attribute. -->
  <test id="invalidWrongNamespaceForId">
    <event specversion="1.0">
      <ce2:id xmlns:ce2="http://cloudevents.io/xmlformat/V2">invalid</ce2:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </event>
  </test>

  <test id="invalidMissingNamespaceForId">
    <ce:event specversion="1.0">
      <id xmlns:ce2="http://cloudevents.io/xmlformat/V2">invalid</id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <test id="invalidNoId">
    <ce:event specversion="1.0">
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <test id="invalidNoType">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
    </ce:event>
  </test>

  <test id="invalidNoSource">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <test id="invalidTimeGarbage">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:time>lunchtime</ce:time>
    </ce:event>
  </test>

  <test id="invalidTimeToMinute">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:time>2018-04-05T18:31Z</ce:time>
    </ce:event>
  </test>

  <test id="invalidTimeOffsetX">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:time>2018-04-05T18:31:00X</ce:time>
    </ce:event>
  </test>

  <test id="invalidTimeOffsetOutOfRange">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:time>2018-04-05T18:31:00+25:00</ce:time>
    </ce:event>
  </test>

  <test id="invalidTimeOffsetNonInteger">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:time>2018-04-05T18:31:00+xx:00</ce:time>
    </ce:event>
  </test>

  <test id="invalidTimeOffsetHourOnly">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:time>2018-04-05T18:31:00+05</ce:time>
    </ce:event>
  </test>

  <test id="invalidEmptyId">
    <ce:event specversion="1.0">
      <ce:id />
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <test id="invalidXsiTypeForIdElement">
    <ce:event specversion="1.0" >
      <ce:id xsi:type="xs:invalid">test-id</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <test id="incorrectXsiTypeForIdElement">
    <ce:event specversion="1.0" >
      <ce:id xsi:type="xs:boolean">true</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <test id="invalidEmptyType">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type />
    </ce:event>
  </test>

  <test id="invalidEmptySource">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source />
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <test id="invalidEmptySpecVersion">
    <ce:event specversion="">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <test id="invalidUnknownSpecVersion">
    <ce:event specversion="0.9">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>
 
  <test id="invalidNonRfc2046DataContentType">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:datacontenttype>xyz</ce:datacontenttype>
    </ce:event>
  </test>
 
  <test id="invalidEmptyDataContentType">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:datacontenttype />
    </ce:event>
  </test>
  
  <test id="invalidDataContentTypeWrongType">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:datacontenttype xsi:type="ce:integer">5</ce:datacontenttype>
    </ce:event>
  </test>
  
  <test id="invalidEmptySchema">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:dataschema />
    </ce:event>
  </test>
  
  <test id="invalidDataSchemaWrongType">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:dataschema xsi:type="ce:integer">5</ce:dataschema>
    </ce:event>
  </test>

  <test id="invalidDataSchemaValue">
    <ce:event specversion="1.0" >
      <ce:id>test-id</ce:id>
      <ce:type>test-type</ce:type>
      <ce:source>//test-source</ce:source>
      <ce:dataschema>//cloudevents.io?query=value</ce:dataschema>
    </ce:event>
  </test>
  
  <test id="invalidEmptySubject">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:subject />
    </ce:event>
  </test>
  
  <test id="invalidSubjectWrongType">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:subject xsi:type="ce:integer">5</ce:subject>
    </ce:event>
  </test>
  
  <test id="invalidTimeWrongType">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:time xsi:type="ce:integer">5</ce:time>
    </ce:event>
  </test>
  
  <test id="invalidCapitalizedExtension">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:MyExt xsi:type="ce:string">text</ce:MyExt>
    </ce:event>
  </test>

  <test id="invalidPunctuatedExtension">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:my-ext xsi:type="ce:string">text</ce:my-ext>
    </ce:event>
  </test>

  <test id="invalidExtensionMissingType">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:ext>text</ce:ext>
    </ce:event>
  </test>

  <test id="invalidExtensionNonCeType">
    <ce:event specversion="1.0" >
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:ext xsi:type="xs:decimal">1.5</ce:ext>
    </ce:event>
  </test>

  <test id="invalidExtensionInvalidValueForType">
    <ce:event specversion="1.0" >
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:ext xsi:type="ce:integer">1.5</ce:ext>
    </ce:event>
  </test>

  <test id="invalidDataWithNoType">
    <ce:event specversion="1.0" >
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:data>Text data</ce:data>
    </ce:event>
  </test>

  <test id="invalidDataWithInvalidType">
    <ce:event specversion="1.0" >
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:data xsi:type="invalid">Text data</ce:data>
    </ce:event>
  </test>

  <test id="invalidDataWithUnsupportedType">
    <ce:event specversion="1.0" >
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:data xsi:type="xs:boolean">true</ce:data>
    </ce:event>
  </test>

  <test id="invalidDataWithNoContentInAny">
    <ce:event specversion="1.0" >
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:data xsi:type="xs:any" />
    </ce:event>
  </test>

  <test id="invalidDataWithTextContentInAny">
    <ce:event specversion="1.0" >
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:data xsi:type="xs:any">
        xyz<element />abc
      </ce:data>
    </ce:event>
  </test>

  <test id="invalidDataWithMultipleElementsInAny">
    <ce:event specversion="1.0" >
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:data xsi:type="xs:any">
        <element1 />
        <element2 />
      </ce:data>
    </ce:event>
  </test>

  <test id="invalidAdditionalTextNode">
    <ce:event specversion="1.0" >
      This shouldn't be here.
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <test id="invalidDuplicateKnownContextAttributeName">
    <ce:event specversion="1.0" >
      <ce:id>invalid</ce:id>
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <test id="invalidDuplicateExtensionAttributeName">
    <ce:event specversion="1.0" >
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:ext xsi:type="string">xyz</ce:ext>
      <ce:ext xsi:type="string">xyz</ce:ext>
    </ce:event>
  </test>

  <test id="invalidDuplicateDataElement">
    <ce:event specversion="1.0" >
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:data xsi:type="xs:string">Text</ce:data>
      <ce:data xsi:type="xs:string">Text</ce:data>
    </ce:event>
  </test>

  <test id="invalidElementInContextAttribute">
    <ce:event specversion="1.0" >
      <ce:id>invalid<nested/></ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <test id="invalidLineBreakInContextAttribute">
    <ce:event specversion="1.0">
      <ce:id>first line
      second line</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
    </ce:event>
  </test>

  <test id="invalidExtensionWithConflictingType" sampleExtensionAttributes="true">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:extinteger xsi:type="ce:string">10</ce:extinteger>
    </ce:event>
  </test>

  <test id="invalidBadBase64Data">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:data xsi:type="xs:base64Binary">x</ce:data>
    </ce:event>
  </test>

  <test id="invalidTextDataWithChildElement">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:data xsi:type="xs:string">x<nested/></ce:data>
    </ce:event>
  </test>

  <test id="invalidBinaryDataWithChildElement">
    <ce:event specversion="1.0">
      <ce:id>invalid</ce:id>
      <ce:source>https://cloudevents.io</ce:source>
      <ce:type>io.cloudevents.test</ce:type>
      <ce:data xsi:type="xs:base64Binary">AQID<nested/></ce:data>
    </ce:event>
  </test>
</testFile>
